{% comment %} {% load static %}
{% load custom_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shipment Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
</head>

{% load custom_tags %}

<nav class="d-flex justify-content-end align-items-center mb-2" style="margin-right: 30px; margin-top: 10px;">
    {% if user.is_authenticated %}
        {% if user|in_group:"FixedCostAdmins" %}
            <a href="{% url 'fixed_cost_config' %}" class="btn btn-warning btn-sm me-2">Manage Fixed Costs</a>
        {% endif %}
        <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm">Logout</a>
    {% else %}
        <a href="{% url 'login' %}" class="btn btn-outline-primary btn-sm">Login</a>
    {% endif %}
</nav>


<body>
<div class="container mt-5">
    <h3 class="mb-4 text-center"><b><u>Super Transport Management</u></b></h3>

    <form method="POST">
        {% csrf_token %}
        <!-- Shipment Details -->
        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Trip No.</label>
            <div class="col-sm-10">
                <input type="text" name="trip_no" class="form-control form-control-sm"
                       value="{{ shipment.trip_no|default:next_trip_no }}" readonly>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Date</label>
            <div class="col-sm-10">
<input type="date" name="date" class="form-control form-control-sm"
       value="{{ shipment.date|date:'Y-m-d' }}" required>

            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Vehicle No</label>
            <div class="col-sm-10">
                <select name="vehicle_no" class="form-select form-select-sm" required>
                    {% for v in vehicles %}
                        <option value="{{ v }}" {% if shipment.vehicle_no|default:'' == v %}selected{% endif %}>{{ v }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">From</label>
            <div class="col-sm-10">
                <select name="origin" class="form-select form-select-sm" required>
                    {% for loc in from_locations %}
                        <option value="{{ loc }}" {% if shipment.origin|default:'' == loc %}selected{% endif %}>{{ loc }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">To</label>
            <div class="col-sm-10">
                <select name="destination" class="form-select form-select-sm" required>
                    {% for loc in to_locations %}
                        <option value="{{ loc }}" {% if shipment.destination|default:'' == loc %}selected{% endif %}>{{ loc }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>


        <div class="row mb-3 align-items-center">
    <label class="col-sm-2 col-form-label">Item & Qty</label>
    <div class="col-sm-10">
        <input type="text" name="item" class="form-control form-control-sm"
               value="{{ shipment.item|default_if_none:'' }}" required>
    </div>
</div>


        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Fuel (Ltr)</label>
            <div class="col-sm-10">
                <input type="number" name="fuel_ltr" class="form-control form-control-sm"
                       value="{{ shipment.fuel_ltr|default_if_none:0 }}" required>
            </div>
        </div>

        <!-- Show costs only if shipment exists -->
        {% if shipment %}
        <hr>
        <h5>Variable Costs</h5>
        {% with shipment.variable_cost as vc %}
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Fare</label>
            <div class="col-sm-10">
                <input type="number" name="fare" class="form-control form-control-sm"
                       value="{{ vc.fare|default_if_none:0 }}">
            </div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Recovery Fare</label>
            <div class="col-sm-10">
                <input type="number" name="recovery_fare" class="form-control form-control-sm"
                       value="{{ vc.recovery_fare|default_if_none:0 }}">
            </div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Fuel (TK)</label>
            <div class="col-sm-10">
                <input type="number" name="fuel_tk" class="form-control form-control-sm"
                       value="{{ vc.fuel_tk|default_if_none:0 }}">
            </div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Toll</label>
            <div class="col-sm-10">
                <input type="number" name="toll" class="form-control form-control-sm"
                       value="{{ vc.toll|default_if_none:0 }}">
            </div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Food</label>
            <div class="col-sm-10">
                <input type="number" name="food" class="form-control form-control-sm"
                       value="{{ vc.food|default_if_none:0 }}">
            </div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Repair</label>
            <div class="col-sm-10">
                <input type="number" name="repair" class="form-control form-control-sm"
                       value="{{ vc.repair|default_if_none:0 }}">
            </div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Police</label>
            <div class="col-sm-10">
                <input type="number" name="police" class="form-control form-control-sm"
                       value="{{ vc.police|default_if_none:0 }}">
            </div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Without doc.</label>
            <div class="col-sm-10">
                <input type="number" name="without_doc" class="form-control form-control-sm"
                       value="{{ vc.without_doc|default_if_none:0 }}">
            </div>
        </div>
        {% endwith %}

        {% endif %}

        <div class="d-flex gap-2 mt-3">
            <button type="submit" class="btn btn-primary" name="action" value="save">Save</button>
            {% if shipment %}
            <button type="submit" class="btn btn-success" name="action" value="post">Save & Post</button>
            {% endif %}
            <button type="submit" class="btn btn-secondary" name="action" value="new">New</button>
            <a href="{% url 'shipment_list' %}" class="btn btn-info">View</a>
        </div>
    </form>
</div> {% endcomment %}

{% comment %} {% load static %}
{% load custom_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shipment Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa, #e4ebf5);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }

        nav {
            background: #ffffff;
            border-bottom: 1px solid #e1e4e8;
            padding: 10px 30px;
        }

        .btn-warning.btn-sm {
            font-weight: 500;
            border-radius: 8px;
        }

        .btn-outline-danger.btn-sm, .btn-outline-primary.btn-sm {
            border-radius: 8px;
            font-weight: 500;
        }

        .container {
            max-width: 700px;
            background: #ffffff;
            padding: 30px;
            border-radius: 18px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
            margin-top: 40px;
            margin-bottom: 40px;
            animation: fadeIn 0.5s ease-in-out;
        }

        h3 {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
        }

        label.col-form-label {
            font-weight: 500;
            color: #555;
        }

        .form-control-sm, .form-select-sm {
            border-radius: 8px;
            font-size: 14px;
            padding: 8px 10px;
            border: 1px solid #ced4da;
        }

        .form-control-sm:focus, .form-select-sm:focus {
            border-color: #4A90E2;
            box-shadow: 0 0 0 0.2rem rgba(74,144,226,.25);
        }

        hr {
            border-top: 1px solid #ddd;
        }

        .btn {
            border-radius: 10px;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
        }

        .btn:hover {
            transform: translateY(-1px);
        }

        .btn-primary {
            background: #4A90E2;
            border: none;
        }

        .btn-primary:hover {
            background: #357ABD;
        }

        .btn-success {
            background: #28a745;
            border: none;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-info {
            background: #17a2b8;
            border: none;
        }

        .btn-info:hover {
            background: #138496;
        }

        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(20px);}
            to {opacity: 1; transform: translateY(0);}
        }
    </style>
</head>

<nav class="d-flex justify-content-end align-items-center">
    {% if user.is_authenticated %}
        {% if user|in_group:"FixedCostAdmins" %}
            <a href="{% url 'fixed_cost_config' %}" class="btn btn-warning btn-sm me-2">Manage Fixed Costs</a>
        {% endif %}
        <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm">Logout</a>
    {% else %}
        <a href="{% url 'login' %}" class="btn btn-outline-primary btn-sm">Login</a>
    {% endif %}
</nav>

<body>
<div class="container">
    <h3 class="text-center"><b>Super Transport Management</b></h3>

    <form method="POST">
        {% csrf_token %}

        <!-- Shipment Details -->
        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Trip No.</label>
            <div class="col-sm-10">
                <input type="text" name="trip_no" class="form-control form-control-sm"
                       value="{{ shipment.trip_no|default:next_trip_no }}" readonly>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Date</label>
            <div class="col-sm-10">
                <input type="date" name="date" class="form-control form-control-sm"
                       value="{{ shipment.date|date:'Y-m-d' }}" required>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Vehicle No</label>
            <div class="col-sm-10">
                <select name="vehicle_no" class="form-select form-select-sm" required>
                    {% for v in vehicles %}
                        <option value="{{ v }}" {% if shipment.vehicle_no|default:'' == v %}selected{% endif %}>{{ v }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">From</label>
            <div class="col-sm-10">
                <select name="origin" class="form-select form-select-sm" required>
                    {% for loc in from_locations %}
                        <option value="{{ loc }}" {% if shipment.origin|default:'' == loc %}selected{% endif %}>{{ loc }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">To</label>
            <div class="col-sm-10">
                <select name="destination" class="form-select form-select-sm" required>
                    {% for loc in to_locations %}
                        <option value="{{ loc }}" {% if shipment.destination|default:'' == loc %}selected{% endif %}>{{ loc }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Item & Qty</label>
            <div class="col-sm-10">
                <input type="text" name="item" class="form-control form-control-sm"
                       value="{{ shipment.item|default_if_none:'' }}" required>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Fuel (Ltr)</label>
            <div class="col-sm-10">
                <input type="number" name="fuel_ltr" class="form-control form-control-sm"
                       value="{{ shipment.fuel_ltr|default_if_none:0 }}" required>
            </div>
        </div>

        {% if shipment %}
        <hr>
        <h5 class="mb-3">Variable Costs</h5>
        {% with shipment.variable_cost as vc %}
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Fare</label>
            <div class="col-sm-10"><input type="number" name="fare" class="form-control form-control-sm"
                                          value="{{ vc.fare|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Recovery Fare</label>
            <div class="col-sm-10"><input type="number" name="recovery_fare" class="form-control form-control-sm"
                                          value="{{ vc.recovery_fare|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Fuel (TK)</label>
            <div class="col-sm-10"><input type="number" name="fuel_tk" class="form-control form-control-sm"
                                          value="{{ vc.fuel_tk|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Toll</label>
            <div class="col-sm-10"><input type="number" name="toll" class="form-control form-control-sm"
                                          value="{{ vc.toll|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Food</label>
            <div class="col-sm-10"><input type="number" name="food" class="form-control form-control-sm"
                                          value="{{ vc.food|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Repair</label>
            <div class="col-sm-10"><input type="number" name="repair" class="form-control form-control-sm"
                                          value="{{ vc.repair|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Police</label>
            <div class="col-sm-10"><input type="number" name="police" class="form-control form-control-sm"
                                          value="{{ vc.police|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Without doc.</label>
            <div class="col-sm-10"><input type="number" name="without_doc" class="form-control form-control-sm"
                                          value="{{ vc.without_doc|default_if_none:0 }}"></div>
        </div>
        {% endwith %}
        {% endif %}

        <div class="d-flex gap-2 mt-4">
            <button type="submit" class="btn btn-primary" name="action" value="save">Save</button>
            {% if shipment %}
            <button type="submit" class="btn btn-success" name="action" value="post">Save & Post</button>
            {% endif %}
            <button type="submit" class="btn btn-secondary" name="action" value="new">New</button>
            <a href="{% url 'shipment_list' %}" class="btn btn-info">View</a>
        </div>
    </form>
</div> {% endcomment %}



{% load static %}
{% load custom_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipment Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <style>
        body {
            background: linear-gradient(135deg, #eef2f7, #dfe6ed);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        nav {
            background: #ffffff;
            border-bottom: 1px solid #e1e4e8;
            padding: 10px 30px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }

        .container {
            max-width: 800px;
            background: #ffffff;
            padding: 35px 25px;
            border-radius: 20px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
            margin: auto;
            margin-top: 40px;
            margin-bottom: 40px;
            animation: fadeIn 0.5s ease-in-out;
        }

        h3 {
            font-weight: 700;
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 30px;
        }

        label.col-form-label {
            font-weight: 500;
            color: #333;
            font-size: 15px;
        }

        .form-control-sm, .form-select-sm {
            border-radius: 8px;
            font-size: 14px;
            padding: 10px;
            border: 1px solid #ced4da;
            transition: all 0.3s ease;
        }

        .form-control-sm:focus, .form-select-sm:focus {
            border-color: #4A90E2;
            box-shadow: 0 0 0 0.25rem rgba(74,144,226,.2);
        }

        hr {
            border-top: 1px solid #ddd;
            margin: 20px 0;
        }

        .btn {
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            padding: 10px 18px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-primary {
            background: #4A90E2;
            border: none;
        }

        .btn-primary:hover {
            background: #357ABD;
        }

        .btn-success {
            background: #28a745;
            border: none;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-info {
            background: #17a2b8;
            border: none;
        }

        .btn-info:hover {
            background: #138496;
        }

        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(20px);}
            to {opacity: 1; transform: translateY(0);}
        }

        @media (max-width: 768px) {
            .container {
                margin: 20px;
                padding: 20px;
            }
            h3 {
                font-size: 22px;
            }
        }

        @media (max-width: 576px) {
            .row .col-sm-2 {
                flex: 0 0 100%;
                max-width: 100%;
                margin-bottom: 5px;
            }
            .row .col-sm-10 {
                flex: 0 0 100%;
                max-width: 100%;
            }
        }
    </style>
</head>

<body>
<nav class="d-flex justify-content-end align-items-center sticky-top bg-white shadow-sm p-2" style="z-index: 1020;">
    {% if user.is_authenticated %}
        {% if user|in_group:"FixedCostAdmins" %}
            <a href="{% url 'fixed_cost_config' %}" class="btn btn-warning btn-sm me-2">Manage Fixed Costs</a>
        {% endif %}
        <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm">Logout</a>
    {% else %}
        <a href="{% url 'login' %}" class="btn btn-outline-primary btn-sm">Login</a>
    {% endif %}
</nav>

<div class="container">
    <h3>Green Super Transport Management</h3>

    <form method="POST">
        {% csrf_token %}
        <!-- Shipment Details -->
        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Trip No.</label>
            <div class="col-sm-10">
                <input type="text" name="trip_no" class="form-control form-control-sm"
                       value="{{ shipment.trip_no|default:next_trip_no }}" readonly>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Date</label>
            <div class="col-sm-10">
                <input type="date" name="date" class="form-control form-control-sm"
                       value="{{ shipment.date|date:'Y-m-d' }}" required>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Vehicle No</label>
            <div class="col-sm-10">
                <select name="vehicle_no" class="form-select form-select-sm" required>
                    {% for v in vehicles %}
                        <option value="{{ v }}" {% if shipment.vehicle_no|default:'' == v %}selected{% endif %}>{{ v }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">From</label>
            <div class="col-sm-10">
                <select name="origin" class="form-select form-select-sm" required>
                    {% for loc in from_locations %}
                        <option value="{{ loc }}" {% if shipment.origin|default:'' == loc %}selected{% endif %}>{{ loc }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">To</label>
            <div class="col-sm-10">
                <select name="destination" class="form-select form-select-sm" required>
                    {% for loc in to_locations %}
                        <option value="{{ loc }}" {% if shipment.destination|default:'' == loc %}selected{% endif %}>{{ loc }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Item & Qty</label>
            <div class="col-sm-10">
                <input type="text" name="item" class="form-control form-control-sm"
                       value="{{ shipment.item|default_if_none:'' }}" required>
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <label class="col-sm-2 col-form-label">Fuel (Ltr)</label>
            <div class="col-sm-10">
                <input type="number" name="fuel_ltr" class="form-control form-control-sm"
                       value="{{ shipment.fuel_ltr|default_if_none:0 }}" required>
            </div>
        </div>

        {% if shipment %}
        <hr>
        <h5 class="mb-3">Variable Costs</h5>
        {% with shipment.variable_cost as vc %}
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Fare</label>
            <div class="col-sm-10"><input type="number" name="fare" class="form-control form-control-sm"
                                          value="{{ vc.fare|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Recovery Fare</label>
            <div class="col-sm-10"><input type="number" name="recovery_fare" class="form-control form-control-sm"
                                          value="{{ vc.recovery_fare|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Fuel (TK)</label>
            <div class="col-sm-10"><input type="number" name="fuel_tk" class="form-control form-control-sm"
                                          value="{{ vc.fuel_tk|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Toll</label>
            <div class="col-sm-10"><input type="number" name="toll" class="form-control form-control-sm"
                                          value="{{ vc.toll|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Food</label>
            <div class="col-sm-10"><input type="number" name="food" class="form-control form-control-sm"
                                          value="{{ vc.food|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Repair</label>
            <div class="col-sm-10"><input type="number" name="repair" class="form-control form-control-sm"
                                          value="{{ vc.repair|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Police</label>
            <div class="col-sm-10"><input type="number" name="police" class="form-control form-control-sm"
                                          value="{{ vc.police|default_if_none:0 }}"></div>
        </div>
        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Without doc.</label>
            <div class="col-sm-10"><input type="number" name="without_doc" class="form-control form-control-sm"
                                          value="{{ vc.without_doc|default_if_none:0 }}"></div>
        </div>
        {% endwith %}
        {% endif %}

        <div class="d-flex flex-wrap gap-2 mt-4">
            <button type="submit" class="btn btn-primary" name="action" value="save">Save</button>
            {% if shipment %}
            <button type="submit" class="btn btn-success" name="action" value="post">Save & Post</button>
            {% endif %}
            <button type="submit" class="btn btn-secondary" name="action" value="new">New</button>
            <a href="{% url 'shipment_list' %}" class="btn btn-info">View</a>
        </div>
    </form>
</div>






<!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Choices.js JS -->
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const selects = document.querySelectorAll('select');
        selects.forEach(function(select){
            const choices = new Choices(select, { 
                searchEnabled: true,
                itemSelectText: '',
                addItems: false,
                removeItemButton: false,
                shouldSort: false
            });

            select.addEventListener('search', function(event){
                const searchValue = event.detail.value.toLowerCase();
                const options = choices.store.getChoices();
                const exactMatchExists = options.some(option => option.value.toLowerCase() === searchValue);

                options.forEach(option => {
                    if(exactMatchExists) {
                        choices.setChoiceDisabled(option.id, option.value.toLowerCase() !== searchValue);
                    } else {
                        choices.setChoiceDisabled(option.id, false);
                    }
                });

                choices.highlightChoice();
            });
        });
    });
</script>
</body>
</html>
